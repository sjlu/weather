var Center;Center=function(){function e(){var e=this;this.positionAll(),$(window).resize(function(){return e.positionAll()})}return e.prototype.positionAll=function(){var e;return e=this,$(".center").each(function(){return e.positionOne($(this))})},e.prototype.positionOne=function(e){var t;return t=e.outerHeight(),e.css("margin-top",-(t/2))},e}(),$(document).ready(function(){var e,t,n,r,i,s,o,u,a,f,l=this;return i=new Map,r=new Location,a=new Weather,s={lines:9,length:10,width:4,radius:11,corners:1,rotate:14,color:"#fff",speed:1.2,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},u=(new Spinner(s)).spin(),$("#loading").append(u.el),t=function(e){return window.location.hash="#/"+e},e=function(e){return Handlebars.compile($(e).html())},o=function(e,t,n){return $(t).fadeOut("fast",function(){return $(e).fadeIn(),n()})},f=function(t){var n,r,i;console.log(t),$("#weather h1").html(""+t.location.city+", "+t.location.state_abbr),r=e("#day"),i=t.weather;for(n in i)a=i[n],$("#weather div").append(r(a)),console.log(a);return o("#weather","#loading")},n=function(e){return a.retrieve(e.zipcode,f),i.setCenter(e.latitude,e.longitude),i.setZoom(13),t(e.zipcode)},$("#track").click(function(){return o("#loading","#location",function(){return r.track(n)})}),$("#zip").keyup(function(e){var t;if(e.keyCode===13)return t=$(this).val(),o("#loading","#location",function(){return r.locateByZipcode(t,n)})}),Path.map("#/:zip").to(function(){var e;return e=this.params.zip,o("#loading","#location",function(){return r.locateByZipcode(e,n)})}),Path.listen()});var Location;Location=function(){function e(){}return e.prototype.url="http://sjlu.cities.jit.su",e.prototype.locateByZipcode=function(e,t){var n;return n=this.url+"/zip/"+e,$.ajax(n,{type:"GET",dataType:"json",success:t})},e.prototype.locateByGps=function(e,t,n){var r;return r=this.url+"/gps/"+e+"/"+t,$.ajax(r,{type:"GET",dataType:"json",success:n})},e.prototype.track=function(e){var t,n,r=this;return n=function(t){var n,i;return n=t.coords.latitude,i=t.coords.longitude,r.locateByGps(n,i,e)},t=function(){return alert("Problem getting your location.")},navigator.geolocation.getCurrentPosition(n,t)},e}();var Map;Map=function(){function e(){var e,t=this;this.create(),e=_.debounce(function(){return t.resize()},300),$(window).resize(function(){return e()})}return e.prototype.setCenter=function(e,t){return this.center=new google.maps.LatLng(e,t),this.mark(e,t),this.map.panTo(this.center)},e.prototype.setZoom=function(e){var t=this;this.zoom=this.zoom+1,this.map.setZoom(this.zoom);if(this.zoom<e)return setTimeout(function(){return t.setZoom(e)},80)},e.prototype.resize=function(){return $("#map").css("height",window.innerHeight).css("width",window.innerWidth),google.maps.event.trigger(this.map,"resize"),this.map.panTo(this.center),this.map.setZoom(this.zoom)},e.prototype.create=function(){var e;return this.zoom=4,this.center=new google.maps.LatLng(39.833333,-98.583333),e={zoom:this.zoom,center:this.center,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!1,disableDoubleClickZoom:!0,keyboardShortcuts:!1,zoomControl:!1,scrollwheel:!1},this.map=new google.maps.Map(document.getElementById("map"),e),this.resize()},e.prototype.mark=function(e,t){return new google.maps.Marker({position:new google.maps.LatLng(e,t),map:this.map})},e}();var Weather;Weather=function(){function e(){}return e.prototype.url="http://sjlu.meteorologist.jit.su",e.prototype.retrieve=function(e,t){var n;return n=this.url+"/forecast/zip/"+e,$.ajax(n,{type:"GET",dataType:"json",success:t})},e}();